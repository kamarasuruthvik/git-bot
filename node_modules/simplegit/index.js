#! /usr/bin/env node

var child_process = require('child_process');

var userArgs = process.argv.slice(2);
var userCommand = userArgs[0];

function contains(string, param) {
  return string.indexOf(param) != -1;
}

if(userCommand == 'st'){
  child_process.exec('git status', function(err, out, code) {
    var lines = out.split(/[\n\r]/g);
    console.log(removeString(lines[0], 'On branch '));
    if (contains(lines[1], 'ahead')) {
      var commitAmount = removeString(removeString(lines[1], ' commits'), ' commit');
      var diff = '+';
      console.log(diff + commitAmount.substring(commitAmount.indexOf('by') + 3, commitAmount.length - 1));
    }
  });
}

function removeString(string, param) {
  return string.replace(param, '');
}
